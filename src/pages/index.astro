---
import BaseHead from "../components/BaseHead.astro";
import Blogtemplate from "../layouts/Blogtemplate.astro";
import image1 from "../assets/dsfasdfs.webp";
import image2 from "../assets/programmer-wallpaper.webp";
import Blogtitle from "../components/Blogtitle.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../consts";
import "../styles/style.css";

const blog = (await Astro.glob("./blog/*.{md,mdx}")).sort(
  (a, b) =>
    new Date(b.frontmatter.pubDate).valueOf() -
    new Date(a.frontmatter.pubDate).valueOf()
);
console.log(blog);

console.log(blog[0].frontmatter.title);
console.log("Thin");
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css"
      integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ=="
      crossorigin="anonymous"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"
    ></script>
  </head>
  <body class="bg-[#02020b] container p-0">
    <Header />
    <section>
      <div>
        <Blogtitle />
        <div
          class="flex flex-col flex-wrap mx-[48px] lg:flex-row gap-12 lg:gap-[17px] pt-16 lg:mx-[72px]"
        >
          {blog && blog.map((post) => <Blogtemplate post={post.frontmatter} />)}
        </div>
      </div>
    </section>
    <Footer />

    <script>
      declare global {
        interface Window {
          netlifyIdentity: any;
        }
      }
      if (window.netlifyIdentity) {
        window.netlifyIdentity.on("init", (user: any) => {
          if (!user) {
            window.netlifyIdentity.on("login", () => {
              document.location.href = "/admin/";
            });
          }
        });
      }
    </script>
  </body>
</html>
